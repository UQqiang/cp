<!DOCTYPE html>
<html lang="cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title></title>
    <!-- rev-hash -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- end -->

    <!-- rev-hash -->
    <link href="../style/css/goods_management.css" rel="stylesheet" type="text/css">
    <link href="../style/css/uploader.css" rel="stylesheet" type="text/css">
    <!-- end -->
</head>

<body class="nav-md">
<div class="container body">
    <div class="main_container">
        @@include('common/sidebar.html')
        @@include('common/header.html')
        @@include('common/uploader.html')

        <!-- page content -->
        <div class="right_col" role="main">

            <!-- 内容部分 -->
            <div class="x_panel">

                <div class="x_title">
                    <div class="add-goods-step clearfix">
                        <span class="add-goods-active col-md-4 col-sm-4 col-xs-4" data-step_value="1">选择商品分类</span>
                        <span class="col-md-4 col-sm-4 col-xs-4" data-step_value="2">编辑商品信息</span>
                        <span class="col-md-4 col-sm-4 col-xs-4" data-step_value="3">选择发货仓库</span>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <!-- 选择类目 -->
                <div class="x_content active-step step" data-now_step="1">
                    <div class="categories">
                        <div class="add-goods-categories mr10">
                            <div class="add-goods-search">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="text" class="form-control">
                                        <div class="input-group-btn">
                                            <button class="btn btn-success">搜索</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="add-goods-category-1" class="category-list"></div>
                        </div>
                        <div class="add-goods-categories">
                            <div class="add-goods-search">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="text" class="form-control">
                                        <div class="input-group-btn">
                                            <button class="btn btn-success">搜索</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="add-goods-category-2" class="category-list"></div>
                        </div>
                    </div>
                    <div class="add-goods-footer clearfix">
                        <div class="col-md-4 col-sm-4 col-xs-4">
                            <span>您最近使用的类目：</span>
                            <select class="form-control form-control-md dib">
                                <option>美食 > 火龙果</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-4">&nbsp;</div>
                        <div class="col-md-4 col-sm-4 col-xs-4 tr">
                            <span>当前选择：</span>
                            <span class="mr10 currentCategory"></span>
                            <a href="javascript:;" class="btn btn-success btn-sm" id="nextStep" disabled="disabled" data-type="next">
                                请选择类目
                            </a>
                            <!--<a href="javascript:;" class="btn btn-success btn-sm" id="nextStep" data-type="next">-->
                            <!--下一步-->
                            <!--</a>-->
                        </div>
                    </div>
                </div>
                <!-- 选择类目 end -->

                <!-- 添加商品 -->
                <div class="x_content step" data-now_step="2">
                    <div>
                        <!-- 基本信息 -->
                        <div class="goods-content">
                            <div class="add-goods-title">
                                <div class="add-goods-inner">
                                    基本信息
                                </div>
                            </div>
                            <div class="add-goods-content">
                                <div class="add-goods-inner">
                                    <div class="form-group">
                                        <label class="ui-label ui-label-lg tr">* 商品类目：</label>
                                        <span class="currentCategory"></span><span class="ml10"><a href="javascript:;" id="reselect" data-type="back">重新选择</a></span>
                                    </div>
                                    <div class="item form-group field">
                                        <label class="ui-label ui-label-lg tr"><span>* 商品名称：</span></label>
                                        <input class="form-control form-control-hg" id="name" required="required" placeholder="请输入商品名称" name="商品名称" type="text" data-validate-length="6,20">
                                    </div>
                                    <div class="item form-group">
                                        <label class="ui-label ui-label-lg tr">* 商品类型：</label>
                                        <label for="goodsType-1" class="ml5 mr5">
                                            跨境商品
                                        </label>
                                        <input type="radio" class="flat" name="radio-goods" id="goodsType-1" value="1" checked="checked"/>
                                        <label for="goodsType-2" class="ml5 mr5">
                                            国内商品
                                        </label>
                                        <input type="radio" class="flat" name="radio-goods" id="goodsType-2" value="2" />
                                    </div>
                                    <div class="item form-group field">
                                        <label class="ui-label ui-label-lg tr">* 商品品牌：</label>
                                        <select class="form-control form-control-md" required name="商品品牌">
                                            <option>请选择商品品牌</option>
                                            <option>A</option>
                                            <option>B</option>
                                        </select>
                                        <span class="ml10"><a href="javascript:;">刷新</a></span>
                                        <span class="ml10 mr10"><a href="javascript:;">新建品牌</a></span>
                                    </div>
                                    <div class="item form-group field">
                                        <label class="ui-label ui-label-lg tr">* 货源地：</label>
                                        <select class="form-control form-control-md" required name="货源地">
                                            <option>请选择商品货源地</option>
                                            <option>W</option>
                                            <option>Q</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 基本信息 end -->

                        <!-- 税率 -->
                        <div class="goods-content" id="rate">
                            <div class="add-goods-title">
                                <div class="add-goods-inner">
                                    税率
                                </div>
                            </div>
                            <div class="add-goods-content">
                                <div class="add-goods-inner">
                                    <div class="form-group">
                                        <label class="ui-label ui-label-lg tr vat">* 税率：</label>
                                        <div class="dib">
                                            <div class="dib">
                                                <div class="mb10">
                                                    <label for="rate-1" class="ml5 mr5">
                                                        统一税率
                                                    </label>
                                                    <input type="radio" class="flat" name="radio-rate" id="rate-1" value="1" checked="checked"/>
                                                </div>
                                                <div class="rate-table">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                        <tr>
                                                            <th>起征点</th>
                                                            <th>税率</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control form-control-md" id="rateCommonThreshold">
                                                                    <span class="input-group-addon">元</span>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control form-control-md" id="rateCommon">
                                                                    <span class="input-group-addon">%</span>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <br/>
                                            <div class="dib">
                                                <div class="mb10">
                                                    <label for="rate-2" class="ml5 mr5">
                                                        税率模板
                                                    </label>
                                                    <input type="radio" class="flat" name="radio-rate" id="rate-2" value="2"/>
                                                </div>
                                                <div class="rate-template">
                                                    <select class="form-control form-control-md" id="rateTemplate">
                                                        <option>请选择税率模板</option>
                                                        <option value="1">模板一</option>
                                                        <option value="2">模板二</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 税率 end -->

                        <!-- 规格 -->
                        <div class="goods-content">
                            <div class="add-goods-title">
                                <div class="add-goods-inner">
                                    规格
                                </div>
                            </div>
                            <div class="add-goods-content">
                                <div class="add-goods-inner">
                                    <div class="form-group">
                                        <label class="ui-label ui-label-lg tr vat"><span>商品规格：</span></label>
                                        <div class="sku-wrapper">
                                            <div id="skuCont"></div>
                                            <div class="sku-group add-group">
                                                <div class="sku-group-title">
                                                    <a href="javascript:;" class="btn btn-default btn-sm j-add-sku-specifications">添加规格项目</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group stock-container">
                                        <label class="ui-label ui-label-lg tr vat"><span>商品库存：</span></label>
                                        <div class="sku-wrapper" id="sku">

                                        </div>
                                    </div>
                                    <div class="form-group sku-container">
                                        <label class="ui-label ui-label-lg tr vat"><span>SKU图片：</span></label>
                                        <div class="sku-wrapper" id="sku-img">

                                        </div>
                                    </div>
                                    <div class="item form-group field">
                                        <label class="ui-label ui-label-lg tr"><span>* 成本价：</span></label>
                                        <input class="form-control form-control-md" id="costPrice" required="required" placeholder="请输入成本价" name="成本价" type="text" pattern="decimal">
                                    </div>
                                    <div class="item form-group field">
                                        <label class="ui-label ui-label-lg tr"><span>* EAN：</span></label>
                                        <input class="form-control form-control-md" id="ean" required="required" placeholder="请输入EAN" name="商品名称" type="text" pattern="decimal">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 规格 end -->

                        <!-- 图文详情 -->
                        <div class="goods-content">
                            <div class="add-goods-title">
                                <div class="add-goods-inner">
                                    图文详情
                                </div>
                            </div>
                            <div class="add-goods-content add-goods-inner">
                                <div class="form-group">
                                    <label class="ui-label ui-label-lg tr vat"><span>商品主图：</span></label>
                                    <div id="main-gallery">
                                        <p>最多5张，支持格式JPEG,PNG，建议尺寸：640 x 640 像素</p>
                                        <ul class="clearfix">
                                            <li class="imgUploadBtn" data-type="common"><i class="fa fa-plus"></i></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="ui-label ui-label-lg tr vat"><span>商品详情：</span></label>
                                    <script type="text/plain" id="editor" class="dib"></script>
                                </div>
                            </div>
                        </div>
                        <!-- 图文详情 end -->

                        <!-- 其他 -->
                        <div class="goods-content">
                            <div class="add-goods-title">
                                <div class="add-goods-inner">
                                    其他
                                </div>
                            </div>
                            <div class="add-goods-content">
                                <div class="add-goods-inner">
                                    <div class="form-inline clearfix">
                                        <div class="item form-group field mb10">
                                            <label class="ui-label ui-label-lg tr mb10"><span>* 物品体积：</span></label>
                                            <div class="input-group">
                                                <input class="form-control form-control-hg" required="required" placeholder="请输入物品体积" name="物品体积" type="text">
                                                <span class="input-group-addon">m3</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-inline clearfix">
                                        <div class="item form-group field mb10">
                                            <label class="ui-label ui-label-lg tr mb10"><span>* 物品重量：</span></label>
                                            <div class="input-group">
                                                <input class="form-control form-control-hg" required="required" placeholder="请输入物品重量" name="物品重量" type="text">
                                                <span class="input-group-addon">kg</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 其他 end -->

                        <div class="goods-content-footer">
                            <button class="btn btn-success nextStep" id="submit" type="submit">下一步</button>
                        </div>
                    </div>
                </div>
                <!-- 添加商品 end -->

                <!-- 选择仓库 -->
                <div class="x_content step" data-now_step="3">
                    <table class="table table-striped jambo_table bulk_action table-bordered">
                        <thead>
                            <tr>
                                <th class="tc">仓库</th>
                                <th class="tc">库存</th>
                                <th class="tc">运费</th>
                                <th class="tc">优先级</th>
                                <th class="tc">操作</th>
                            </tr>
                        </thead>
                        <tbody id="warehouse">
                            <tr>
                                <td>
                                    <select class="form-conrol form-control-md">
                                        <option>请选择仓库</option>
                                    </select>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- 选择仓库 end -->

            </div>
            <!-- 内容部分 -->

        </div>
        <!-- /page content -->

        @@include('common/footer.html')

    </div>
</div>

<!-- rev-hash -->
<!-- inject:js -->
<!-- endinject -->
<!-- end -->

<!-- rev-hash -->
<script src="../src/plugin/ueditor/ueditor.config.js"></script>
<script src="../src/plugin/ueditor/ueditor.all.js"></script>
<script src="../src/fn/goods.js"></script>
<!-- end -->

<!-- 类目模板 -->
<script type="text/template" id="template-category">
    <ul>
    <% _.each(items,function(item,index){ %>
        <% if( level === item.cate_level ){ %>
            <% if( level == 1 ){ %>
                <li data-id="<%= item.id %>" data-parent_id="<%= item.parent_id %>" data-cate_level="<%= item.cate_level %>"><%= item.cate_name %></li>
            <% }else{ %>
                <% if( item.parent_id == parent_id ){ %>
                     <li data-id="<%= item.id %>" data-parent_id="<%= item.parent_id %>" data-cate_level="<%= item.cate_level %>"><%= item.cate_name %></li>
                <% } %>
            <% } %>
        <% } %>
    <% }) %>
    </ul>
</script>

<!-- sku模板 - 商品规格 -->
<script type="text/template" id="j-template-selectize">
    <div class="sku-group add-group">
        <div class="sku-group-title">
            <div class="selectize-wrapper selectize-wrapper-<%= number %>">
                <select id="selectize-<%= number %>"></select>
            </div>
            <i class="fa fa-close selectize-close j-close"></i>
        </div>
        <div class="sku-group-cont sku-group-cont-<%= number %>" data-index="<%= number %>">

        </div>
    </div>
</script>

<!-- sku模板 - 添加sku -->
<script type="text/template" id="j-template-skuProp">
    <a href="javascript:;" class="j-add-prop" data-name="<%= current_prop_name %>" data-value="<%= current_prop_value %>">+ 添加</a>
</script>

<!-- sku模板 - sku - 商品库存 -->
<script type="text/template" id="j-template-sku">
    <div>
        <table class="table table-striped jambo_table bulk_action table-bordered">
            <thead>
                <tr>
                    <% _.each(items,function(item,index){ %>
                        <% if( index == 0 ){ %>
                            <% _.each(item,function(n,m){ %>
                                    <th class="tc cell-12"><%= n.prop_name %></th>
                            <% }) %>
                        <% } %>
                    <% }) %>
                    <th class="tc cell-12">成本价</th>
                    <th class="tc cell-12">EAN</th>
                </tr>
            </thead>
            <tbody>
                <% _.each(items,function(item,index){ %>
                    <tr>
                        <% _.each(item,function(n,m){ %>
                            <td class="tc"><%= n.value_name %></td>
                        <% }) %>
                        <td class="tc"><input class="form-control form-control-sm" data-input_type="costPrice"></td>
                        <td class="tc"><input class="form-control form-control-sm" data-input_type="ean"></td>
                    </tr>
                <% }) %>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="10">
                        <label class="ui-label tl">批量设置：</label>
                        <span class="j-batch btn btn-sm" data-type="costPrice">成本价</span><span><input class="ml10 mr10 form-control form-control-sm none" data-type="costPrice"></span>
                        <span class="j-batch btn btn-sm" data-type="ean">EAN</span><span><input class="ml10 mr10 form-control form-control-sm none" data-type="ean"></span>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</script>

<!-- sku模板 - sku - sku主图select框 -->
<script type="text/template" id="j-template-sku-select">
    <div class="sku-img-wrapper">
        <p>选择需要添加图片的SKU属性
            <span>
            <% _.each(items,function(item,index){ %>
                <% if( index == 0 ){ %>
                    <% _.each(item,function(n,m){ %>
                        <label class="ml10 mr10"><%= n.prop_name %></label>
                        <% if( m == 0 ){ %>
                            <input type="radio" name="radio-sku-prop" class="flat" checked="checked" data-key="<%= n.prop_name %>">
                        <% }else{ %>
                            <input type="radio" name="radio-sku-prop" class="flat" data-key="<%= n.prop_name %>">
                        <% } %>
                    <% }) %>
                <% } %>
            <% }) %>
            </span>
        </p>
        <div class="sku-gallery"></div>
    </div>
</script>

<!-- sku模板 - sku - sku主图 -->
<script type="text/template" id="j-template-sku-img">
    <% _.each(items,function(value,key){ %>
        <% _.each(value['arr'],function(item,index){ %>
            <% if( value['floor'] == 1 ){ %>
                <dl class="dl-active" data-key="<%= key %>">
                    <dt class="imgUploadBtn" data-type="sku" data-name="<%= item.value_name %>">
                        <i class="fa fa-plus"></i>
                    </dt>
                    <dd><span><%= item.value_name %></span></dd>
                </dl>
            <% }else{ %>
                <dl data-key="<%= key %>">
                    <dt class="imgUploadBtn" data-type="sku" data-name="<%= item.value_name %>">
                        <i class="fa fa-plus"></i>
                    </dt>
                    <dd><span><%= item.value_name %></span></dd>
                </dl>
            <% } %>
        <% }) %>
    <% }) %>
</script>

<!-- 商品主图 -->
<script type="text/template" id="j-template-common-gallery">
        <% _.each(items,function(item,index){ %>
            <li class="imgUploadBtn" data-type="common"><img class="image" src="<%= item.img %>"><i class="fa fa-plus"></i></li>
            <!--<li><img src="<%= item.img %>"></li>-->
        <% }) %>
        <% if(items.length < 5){ %>
        <li class="imgUploadBtn" data-type="common"><i class="fa fa-plus"></i></li>
        <% } %>
</script>
</body>
</html>
